---
import TatoosSlide from "~components/TatoosSlide.astro";

export interface Props {
    title?: string;
    subtitle?: string;
    tabsLabel?: string;
    tabs: Array<{
        name: string,
        slides: Array<{
            src: string,
            title?: string,
            color?: string,
        }>,
    }>;
}

const { title, subtitle, tabsLabel, tabs } = Astro.props;
---

<div class="tabs-slider">
    {title && <h2 class="tabs-slider_title">{title}</h2>}
    {subtitle && <p class="tabs-slider_subtitle">{subtitle}</p>}
    {tabsLabel && <span class="tabs-slider_label">{tabsLabel}:</span>}
    <div class="tabs-slider_buttons">
        {tabs.map((tab) => (
            <button class="tabs-slider_button">
                <div class="tabs-slider_button-bg"></div>
                {tab.name}
            </button>
        ))}
    </div>
    
    <div class="tabs-slider_list">
        <div class="swiper-holder">
            <div class="swiper">
                <div class="swiper-wrapper">
                    {tabs.map((tab) => (
                        tab.slides.map((slide) => (
                            <div class="swiper-slide">
                                <div class="tabs-slider_slide">
                                        <TatoosSlide
                                            src={slide.src}
                                            color={slide.color}
                                            title={slide.title}
                                        />
                                </div>
                            </div>
                        ))
                    ))}
                </div>

            </div>
            <div class="swiper-pagination"></div>

            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>
    </div>
</div>
<script>
    import Swiper from "swiper";
    import { Navigation, Pagination } from "swiper/modules";
    const swiper = new Swiper(".swiper", {
        loop: false,
        modules: [Navigation, Pagination],
        slidesPerView: 'auto',
        spaceBetween: 20,
        pagination: {
            clickable: true,
            el: ".swiper-pagination",
        },
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    });

    const tabsSliders = document.querySelectorAll('.tabs-slider');
    tabsSliders.forEach((slider) => {
        const buttons = slider.querySelectorAll('.tabs-slider_button');

        console.log(buttons);
        buttons.forEach(button => button.addEventListener('click', (e) => {
            e.preventDefault();

            buttons.forEach(button => button.classList.remove('active'));
            e.target.classList.add('active');


        }))
    });
</script>
